<!doctype html>
<html lang=en>
   <head>
      <meta charset=utf-8>
      <meta name=viewport content="width=device-width, initial-scale=1, maximum-scale=1">
      <title>API Reference</title>
      <link rel=icon href=images/bookmark.png>
      <link href=stylesheets/screen.css rel=stylesheet media=screen>
      <link href=stylesheets/print.css rel=stylesheet media=print>
      <link href=stylesheets/highlight-monokai.css rel=stylesheet media=screen,print>
      <script src=javascripts/all.js></script>
   </head>
   <body class="" data-languages="[&#34;json&#34;]">
      <a href=# id=nav-button>
         <span>NAV <img alt=navbar class=image-navbar src=images/navbar.png></span>
      </a>
      <div class=tocify-wrapper>
         <img alt=logo class=image-logo src=images/logo.png>
         <div class=lang-selector>
            <a href=# data-language-name="json">json</a>
         </div>
         <div class=search>
            <input type=text class=search id=input-search placeholder="Search">
         </div>
         <ul class=search-results></ul>
         <div id=toc></div>
         <ul class=toc-footer>
            <li><a href=https://github.com/center-key/node-slate>node-slate on GitHub</a></li>
            <li><a href=https://www.npmjs.com/package/node-slate>Documentation powered by Slate</a></li>
         </ul>
      </div>
      <div class=page-wrapper>
         <div class=dark-box></div>
         <div class=content>
            <h1 id="derivadex-api">DerivaDEX API</h1>
            <p>DerivaDEX is a decentralized derivatives exchange that combines the performance of centralized exchanges with the security of decentralized exchanges.</p>
            <p>DerivaDEX currently offers a public WebSocket API for traders and developers. You must first make a deposit to the DerivaDEX ethereum contracts. The API will then enable you to open and manage your positions via commands, and subscribe to market data via subscriptions. </p>
            <p>Find us online <a href="https://discord.gg/a54BWuG">Discord</a> | <a href="https://t.me/DerivaDEX">Telegram</a> | <a href="https://medium.com/derivadex">Medium</a></p>
            <h1 id="getting-started">Getting Started</h1>
            <p>DerivaDEX is a decentralized exchange. As such, trading is non-custodial. Users are responsible for their own funds, which are deposited to the DerivaDEX smart contract on Ethereum for trading. </p>
            <p>To begin interacting with the DerivaDEX ecosystem programmatically, you generally will want to follow these steps:</p>
            <ol>
               <li>Deposit funds via Ethereum via an Ethereum client</li>
               <li>Authenticate and connect to the websocket API</li>
               <li>Submit and cancel orders via <code>commands</code></li>
               <li>Subscribe to market and account data feeds via <code>subscriptions</code> </li>
            </ol>
            <p>Additionally, you should familiarize yourself with <a href="https://eips.ethereum.org/EIPS/eip-712">EIP 712 signatures</a>, which is how you will sign <code>command</code> data prior to submission. </p>
            <h2 id="making-a-deposit">Making a deposit</h2>
            <p>To deposit funds on DerivaDEX, first ensure that you have created an Ethereum account. The deposit interaction is between a user and the DerivaDEX smart contract. To be more explicit, you will not be utilizing the WebSocket API to facilitate a deposit. The DerivaDEX Solidity smart contracts adhere to the <a href="https://medium.com/derivadex/the-diamond-standard-a-new-paradigm-for-upgradeability-569121a08954">Diamond Standard</a>. The <code>deposit</code> smart contract function you will need to use is located in the <code>Trader</code> facet, at the address of the main <code>DerivaDEX</code> proxy contract.</p>
            <pre class="highlight text"><code>// solidity
function deposit(
    address _collateralAddress,
    bytes32 _strategyId,
    uint128 _amount
) external;</code></pre>
            <table>
               <thead>
                  <tr>
                     <th>field</th>
                     <th>description</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td>_collateralAddress</td>
                     <td>ERC-20 token address deposited as collateral</td>
                  </tr>
                  <tr>
                     <td>_strategyId</td>
                     <td>Strategy ID (encoded as a 32-byte value) being funded</td>
                  </tr>
                  <tr>
                     <td>_amount</td>
                     <td>Amount deposited (be sure to use the grains format specific to the collateral token being used (e.g. if you wanted to deposit 1 USDC, you would enter 1000000 since the USDC token contract has 6 decimal places)</td>
                  </tr>
               </tbody>
            </table>
            <h2 id="connecting-to-the-websocket-api">Connecting to the Websocket API</h2>
            <p>Addresses used to connect to the websocket API must <em>already</em> have funds deposited. If you haven&#39;t, [do that first](#Making a deposit).</p>
            <p>The steps to connect are:</p>
            <ol>
               <li>Generate a numeric value (<code>nonce</code>) that is greater than the last value used for this address. Typically, <a href="https://en.wikipedia.org/wiki/Unix_time">Unix time</a> (either milliseconds or nanoseconds) is used, but users may opt to maintain their own sequence counter. Requests with a nonce that are less than or equal to the previous value will be rejected.</li>
               <li><code>Keccak-256</code> hash the following ABI-encoded values with the specified types(using <code>Keccak-256</code>):<ul>
                     <li>&quot;DerivaDEX API&quot; (<code>bytes32</code>) </li>
                     <li><code>nonce</code> (<code>uint256</code>)</li>
                  </ul>
               </li>
               <li>Generate a <code>signature</code> of the hash using eth_sign or equivalent signer.</li>
               <li>Connect to the websocket with the url: <code>wss://api.derivadex.com?nonce=[nonce]&amp;signature=[signature]</code></li>
            </ol>
            <p>For more information, see the <a href="samples.md">code samples</a>.</p>
            <h1 id="commands">Commands</h1>
            <p>The websocket API offers commands for placing and canceling orders, as well as withdrawals. Since commands modify system state, these requests must include an <a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-712.md">EIP712 signature</a>. Examples are included in the <a href="samples.md">sample code</a>.</p>
            <h2 id="place-order">Place Order</h2>
            <p>Traders can place new orders by specifying specific attributes in the <code>Order</code> command&#39;s request payload. These requests are subject to a set of validations.</p>
            <blockquote>
               <p>Request format:</p>
            </blockquote>
            <pre class="highlight json"><code>{
  <span class="hljs-attr">&quot;request&quot;</span>: {
    <span class="hljs-attr">&quot;t&quot;</span>: <span class="hljs-string">&quot;Order&quot;</span>,
    <span class="hljs-attr">&quot;c&quot;</span>: {
      <span class="hljs-attr">&quot;makerAddress&quot;</span>: <span class="hljs-string">&quot;0x603699848c84529987E14Ba32C8a66DEF67E9eCE&quot;</span>,
      <span class="hljs-attr">&quot;symbol&quot;</span>: <span class="hljs-string">&quot;ETHPERP&quot;</span>,
      <span class="hljs-attr">&quot;strategy&quot;</span>: <span class="hljs-string">&quot;main&quot;</span>,
      <span class="hljs-attr">&quot;side&quot;</span>: <span class="hljs-string">&quot;Bid&quot;</span>,
      <span class="hljs-attr">&quot;orderType&quot;</span>: <span class="hljs-string">&quot;Market&quot;</span>,
      <span class="hljs-attr">&quot;requestId&quot;</span>: <span class="hljs-string">&quot;0x0000000000000000000000000000000000000000000000000000000000000001&quot;</span>,
      <span class="hljs-attr">&quot;amount&quot;</span>: <span class="hljs-string">&quot;123.45&quot;</span>,
      <span class="hljs-attr">&quot;price&quot;</span>: <span class="hljs-string">&quot;234.56&quot;</span>,
      <span class="hljs-attr">&quot;stopPrice&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,
      <span class="hljs-attr">&quot;signature&quot;</span>: <span class="hljs-string">&quot;0x89fb49d2d125adfef56328ee7367d23d1642d2fb6cfdf8843fa94ae7eac9ab23&quot;</span>
    }
  }
}</code></pre>
            <table>
               <thead>
                  <tr>
                     <th>type</th>
                     <th>field</th>
                     <th>description</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td>address</td>
                     <td>makerAddress</td>
                     <td>Trader&#39;s Ethereum address (same as the one that facilitated the deposit)</td>
                  </tr>
                  <tr>
                     <td>string</td>
                     <td>symbol</td>
                     <td>Name of the market to trade. Currently, this is limited to &#39;ETHPERP&#39;, but new symbols are coming soon!</td>
                  </tr>
                  <tr>
                     <td>bytes32</td>
                     <td>strategy</td>
                     <td>Name of the Always <code>main</code>. Support for multiple strategies coming soon!</td>
                  </tr>
                  <tr>
                     <td>uint256</td>
                     <td>side</td>
                     <td>Whether the order is a Bid or an Ask (case sensitive)</td>
                  </tr>
                  <tr>
                     <td>uint256</td>
                     <td>orderType</td>
                     <td><code>Market</code>. Other order types coming soon!</td>
                  </tr>
                  <tr>
                     <td>bytes32</td>
                     <td>requestID</td>
                     <td>An incrementing numeric identifier for this request</td>
                  </tr>
                  <tr>
                     <td>uint256</td>
                     <td>amount</td>
                     <td>The amount requested</td>
                  </tr>
                  <tr>
                     <td>uint256</td>
                     <td>price</td>
                     <td>The Bid or Ask price</td>
                  </tr>
                  <tr>
                     <td>uint256</td>
                     <td>stopPrice</td>
                     <td>Currently, always 0 as stops are not implemented.</td>
                  </tr>
                  <tr>
                     <td>bytes</td>
                     <td>signature</td>
                     <td>EIP712 signature</td>
                  </tr>
               </tbody>
            </table>
            <h2 id="cancel-order">Cancel Order</h2>
            <blockquote>
               <p>Request format:</p>
            </blockquote>
            <pre class="highlight json"><code>{
  <span class="hljs-attr">&quot;request&quot;</span>: {
    <span class="hljs-attr">&quot;t&quot;</span>: <span class="hljs-string">&quot;CancelOrder&quot;</span>,
    <span class="hljs-attr">&quot;c&quot;</span>: {
      <span class="hljs-attr">&quot;symbol&quot;</span>: <span class="hljs-string">&quot;ETHPERP&quot;</span>,
      <span class="hljs-attr">&quot;orderHash&quot;</span>: <span class="hljs-string">&quot;0xa2e47f2d462c4368fdae25028447c78118ba349141d0ba945c6f100dfd149029&quot;</span>,
      <span class="hljs-attr">&quot;orderRequestId&quot;</span>: <span class="hljs-string">&quot;0x0e37c859bd811c0d877940c528df79baad972282e82ef3dd37e6fbe21b988653&quot;</span>,
      <span class="hljs-attr">&quot;requestId&quot;</span>: <span class="hljs-string">&quot;0x0000000000000000000000000000000000000000000000000000000000000653&quot;</span>,
      <span class="hljs-attr">&quot;signature&quot;</span>: <span class="hljs-string">&quot;0x89fb49d2d125adfef56328ee7367d23d1642d2fb6cfdf8843fa94ae7eac9ab23&quot;</span>
    }
  }
}</code></pre>
            <table>
               <thead>
                  <tr>
                     <th>type</th>
                     <th>field</th>
                     <th>description</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td>string</td>
                     <td>symbol</td>
                     <td>Currently always &#39;ETHPERP&#39;. New symbols coming soon!</td>
                  </tr>
                  <tr>
                     <td>bytes32</td>
                     <td>orderHash</td>
                     <td>Where does this come from?</td>
                  </tr>
                  <tr>
                     <td>bytes32</td>
                     <td>orderRequestId</td>
                     <td>How is this different from requestID?</td>
                  </tr>
                  <tr>
                     <td>bytes32</td>
                     <td>requestID</td>
                     <td>An incrementing numeric identifier for this request</td>
                  </tr>
                  <tr>
                     <td>bytes</td>
                     <td>signature</td>
                     <td>EIP712 signature</td>
                  </tr>
               </tbody>
            </table>
            <h2 id="withdraw">Withdraw</h2>
            <blockquote>
               <p>Request format:</p>
            </blockquote>
            <pre class="highlight json"><code>{
  <span class="hljs-attr">&quot;request&quot;</span>: {
    <span class="hljs-attr">&quot;t&quot;</span>: <span class="hljs-string">&quot;Withdraw&quot;</span>,
    <span class="hljs-attr">&quot;c&quot;</span>: {
      <span class="hljs-attr">&quot;traderAddress&quot;</span>: <span class="hljs-string">&quot;0x603699848c84529987E14Ba32C8a66DEF67E9eCE&quot;</span>,
      <span class="hljs-attr">&quot;strategyId&quot;</span>: <span class="hljs-string">&quot;main&quot;</span>,
      <span class="hljs-attr">&quot;currency&quot;</span>: <span class="hljs-string">&quot;0x41082c820342539de44c1b404fead3b4b39e15d6&quot;</span>,
      <span class="hljs-attr">&quot;amount&quot;</span>: <span class="hljs-string">&quot;440.32&quot;</span>,
      <span class="hljs-attr">&quot;requestId&quot;</span>: <span class="hljs-string">&quot;0x0e37c859bd811c0d877940c528df79baad972282e82ef3dd37e6fbe21b988653&quot;</span>,
      <span class="hljs-attr">&quot;signature&quot;</span>: <span class="hljs-string">&quot;0x89fb49d2d125adfef56328ee7367d23d1642d2fb6cfdf8843fa94ae7eac9ab23&quot;</span>
    }
  }
}</code></pre>
            <table>
               <thead>
                  <tr>
                     <th>type</th>
                     <th>field</th>
                     <th>description</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td>address</td>
                     <td>traderAddress</td>
                     <td>Address of the account for the withdrawal</td>
                  </tr>
                  <tr>
                     <td>bytes32</td>
                     <td>strategyId</td>
                     <td>??</td>
                  </tr>
                  <tr>
                     <td>address</td>
                     <td>currency</td>
                     <td>contract address for currency (USDC)</td>
                  </tr>
                  <tr>
                     <td>uint128</td>
                     <td>amount</td>
                     <td>amount to be withdrawin</td>
                  </tr>
                  <tr>
                     <td>bytes32</td>
                     <td>requestId</td>
                     <td>An incrementing numeric identifier for this request.</td>
                  </tr>
                  <tr>
                     <td>bytes</td>
                     <td>signature</td>
                     <td>EIP712 signature</td>
                  </tr>
               </tbody>
            </table>
            <h2 id="receipts">Receipts</h2>
            <pre class="highlight json"><code>{
  <span class="hljs-attr">&quot;receipt&quot;</span>: {
    <span class="hljs-attr">&quot;t&quot;</span>: <span class="hljs-string">&quot;Received&quot;</span>,
    <span class="hljs-attr">&quot;c&quot;</span>: {
      <span class="hljs-attr">&quot;requestId&quot;</span>: <span class="hljs-string">&quot;0x0e37c859bd811c0d877940c528df79baad972282e82ef3dd37e6fbe21b988653&quot;</span>,
      <span class="hljs-attr">&quot;requestIndex&quot;</span>: <span class="hljs-string">&quot;0x5&quot;</span>,
      <span class="hljs-attr">&quot;enclaveSignature&quot;</span>: <span class="hljs-string">&quot;0x0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;</span>
  }
}</code></pre>
            <p>Each command returns a receipt, which confirms that an Operator has received the request sequenced it for processing. The receipt <code>type</code> will be either &quot;Received&quot; or &quot;Error&quot;. The <code>requestId</code> is the requestId from the original command. The <code>requestIndex</code> is the Operator&#39;s sequence id.</p>
            <table>
               <thead>
                  <tr>
                     <th>type</th>
                     <th>field</th>
                     <th>description</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td>bytes32</td>
                     <td>requestId</td>
                     <td>The requestId supplied in the initial request - can be used to correlated requests with receipts</td>
                  </tr>
                  <tr>
                     <td>??</td>
                     <td>requestIndex</td>
                     <td>A ticket number which guarentees fair sequencing (how?)</td>
                  </tr>
                  <tr>
                     <td>??</td>
                     <td>enclaveSignature</td>
                     <td>An Operator&#39;s signature which proves secure handling of the request</td>
                  </tr>
               </tbody>
            </table>
            <p>DerivaDEX operators execute code within a trusted execution environment. The enclaveSignature affirms that this environment has the guaranteed associated with Intel SGX TEEs. </p>
            <h2 id="receipt-error">Receipt error</h2>
            <blockquote>
               <p>Receipt error message</p>
            </blockquote>
            <pre class="highlight json"><code>{
  <span class="hljs-attr">&quot;receipt&quot;</span>: {
    <span class="hljs-attr">&quot;t&quot;</span>: <span class="hljs-string">&quot;Error&quot;</span>,
    <span class="hljs-attr">&quot;c&quot;</span>: {
      <span class="hljs-attr">&quot;msg&quot;</span>: <span class="hljs-string">&quot;Nonces cannot go backwards&quot;</span>,
    }
  }
}</code></pre>
            <p>A error will return a receipt with type of <code>Error</code> and an error message.</p>
            <h1 id="subscriptions">Subscriptions</h1>
            <h2 id="subscribe-to-account-feed">Subscribe to account feed</h2>
            <blockquote>
               <p>Subscribe to account feed</p>
            </blockquote>
            <pre class="highlight json"><code>{
  <span class="hljs-attr">&quot;request&quot;</span>: {
    <span class="hljs-attr">&quot;t&quot;</span>: <span class="hljs-string">&quot;SubscribeAccount&quot;</span>,
    <span class="hljs-attr">&quot;c&quot;</span>: {
      <span class="hljs-attr">&quot;trader&quot;</span>: <span class="hljs-string">&quot;0x603699848c84529987E14Ba32C8a66DEF67E9eCE&quot;</span>,
      <span class="hljs-attr">&quot;strategies&quot;</span>: [<span class="hljs-string">&quot;main&quot;</span>],
      <span class="hljs-attr">&quot;events&quot;</span>: [<span class="hljs-string">&quot;OrdersUpdate&quot;</span>, <span class="hljs-string">&quot;PositionUpdate&quot;</span>, <span class="hljs-string">&quot;StrategyUpdate&quot;</span>]
    }
  }
}</code></pre>
            <p>Account feeds are subscriptions to Strategy and Position events for a trader address. To subscribe to an account feed, send a websocket message following the code sample at right:</p>
            <table>
               <thead>
                  <tr>
                     <th>type</th>
                     <th>field</th>
                     <th>description</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td>bytes32</td>
                     <td>trader</td>
                     <td>The address you want to subscribe to (i.e., your own Ethereum address)</td>
                  </tr>
                  <tr>
                     <td>?</td>
                     <td>strategies</td>
                     <td>The strategy &#39;main&#39; must be included.</td>
                  </tr>
                  <tr>
                     <td>?</td>
                     <td>events</td>
                     <td>Pass in one or both of StrategyUpdate and PositionUpdate to subscribe to an account feed</td>
                  </tr>
               </tbody>
            </table>
            <h2 id="account-feed-subscription-confirmation">Account feed subscription confirmation</h2>
            <blockquote>
               <p>Confirmation receipt</p>
            </blockquote>
            <pre class="highlight json"><code>{
  <span class="hljs-attr">&quot;receipt&quot;</span>: {
    <span class="hljs-attr">&quot;t&quot;</span>: <span class="hljs-string">&quot;Subscribed&quot;</span>,
    <span class="hljs-attr">&quot;c&quot;</span>: {
      <span class="hljs-attr">&quot;msg&quot;</span>: <span class="hljs-string">&quot;Subscribed to PositionUpdate for 0x0e37c859bd811c0d877940c528df79baad972282e82ef3dd37e6fbe21b988653&quot;</span>
    }
  }
}</code></pre>
            <p>A receipt type &#39;Subscribed&#39; confirms the subscription was successful.</p>
            <h2 id="account-feed-snapshot">Account feed snapshot</h2>
            <pre class="highlight json"><code>{
  <span class="hljs-attr">&quot;t&quot;</span>: <span class="hljs-string">&quot;PositionUpdate&quot;</span>,
  <span class="hljs-attr">&quot;e&quot;</span>: <span class="hljs-string">&quot;Partial&quot;</span>,
  <span class="hljs-attr">&quot;c&quot;</span>: [{
    <span class="hljs-attr">&quot;trader&quot;</span>: <span class="hljs-string">&quot;0x603699848c84529987E14Ba32C8a66DEF67E9eCE&quot;</span>,
    <span class="hljs-attr">&quot;strategyId&quot;</span>: <span class="hljs-string">&quot;main&quot;</span>,
    <span class="hljs-attr">&quot;symbol&quot;</span>: <span class="hljs-string">&quot;ETHPERP&quot;</span>,
    <span class="hljs-attr">&quot;side&quot;</span>: <span class="hljs-string">&quot;Long&quot;</span>,
    <span class="hljs-attr">&quot;balance&quot;</span>: <span class="hljs-string">&quot;423.44&quot;</span>,
    <span class="hljs-attr">&quot;avgPrice&quot;</span>: <span class="hljs-string">&quot;605&quot;</span>,
    <span class="hljs-attr">&quot;lastEpoch&quot;</span>: <span class="hljs-string">&quot;325&quot;</span>
  }]
}</code></pre>
            <p>The current snapshot is returned immediately after the subscription receipt with a type of <code>Partial</code>. <code>Partial</code> indicates that this is an initial snapshop following a subscription. <code>Epoch</code> indicates what DerivaDEX epoch the snapshot was taken in. DerivaDEX epochs are relevant to withdrawals, as at least one epoch must pass before an initiated withdrawal can be completed.</p>
            <h2 id="account-feed-update">Account feed update</h2>
            <pre class="highlight json"><code>{
  <span class="hljs-attr">&quot;t&quot;</span>: <span class="hljs-string">&quot;PositionUpdate&quot;</span>,
  <span class="hljs-attr">&quot;e&quot;</span>: <span class="hljs-string">&quot;Update&quot;</span>,
  <span class="hljs-attr">&quot;c&quot;</span>: [{
    <span class="hljs-attr">&quot;trader&quot;</span>: <span class="hljs-string">&quot;0x603699848c84529987E14Ba32C8a66DEF67E9eCE&quot;</span>,
    <span class="hljs-attr">&quot;strategyId&quot;</span>: <span class="hljs-string">&quot;main&quot;</span>,
    <span class="hljs-attr">&quot;symbol&quot;</span>: <span class="hljs-string">&quot;ETHPERP&quot;</span>,
    <span class="hljs-attr">&quot;side&quot;</span>: <span class="hljs-string">&quot;Long&quot;</span>,
    <span class="hljs-attr">&quot;balance&quot;</span>: <span class="hljs-string">&quot;423.44&quot;</span>,
    <span class="hljs-attr">&quot;avgPrice&quot;</span>: <span class="hljs-string">&quot;605&quot;</span>,
    <span class="hljs-attr">&quot;lastEpoch&quot;</span>: <span class="hljs-string">&quot;325&quot;</span>
  }] 
}</code></pre>
            <p>Streaming updates follow, with the type <code>Update</code>. <code>Update</code> indicates that this is an incremental update.</p>
            <h2 id="market-events-subscription">Market events subscription</h2>
            <blockquote>
               <p>Subscribe to market</p>
            </blockquote>
            <pre class="highlight json"><code>{
  <span class="hljs-attr">&quot;request&quot;</span>: {
    <span class="hljs-attr">&quot;t&quot;</span> : <span class="hljs-string">&quot;SubscribeMarket&quot;</span>,
    <span class="hljs-attr">&quot;c&quot;</span> : {
      <span class="hljs-attr">&quot;symbols&quot;</span>: [<span class="hljs-string">&quot;ETHPERP&quot;</span>],
      <span class="hljs-attr">&quot;events&quot;</span>: [<span class="hljs-string">&quot;OrderBookUpdate&quot;</span>, <span class="hljs-string">&quot;MarkPriceUpdate&quot;</span>]
    }
  }
}</code></pre>
            <p>Subscribe to Orderbook and Markprice events by sending a websocket message following the code snippet format at right.</p>
            <h2 id="market-events-subscription-confirmation">Market events subscription confirmation</h2>
            <blockquote>
               <p>Market subscription confirmation</p>
            </blockquote>
            <pre class="highlight json"><code>{
   <span class="hljs-attr">&quot;receipt&quot;</span>: {
     <span class="hljs-attr">&quot;t&quot;</span>: <span class="hljs-string">&quot;Subscribed&quot;</span>,
     <span class="hljs-attr">&quot;c&quot;</span>: {
       <span class="hljs-attr">&quot;msg&quot;</span>: <span class="hljs-string">&quot;Subscribed to OrderBookUpdate for ETHPERP&quot;</span>
     }
   }
}</code></pre>
            <p>A successful subscription returns a confirmation message of type <code>Subscribed</code>.</p>
            <h2 id="market-events-partial-orderbook-snapshot">Market events partial orderbook snapshot</h2>
            <pre class="highlight json"><code>{
   <span class="hljs-attr">&quot;t&quot;</span>: <span class="hljs-string">&quot;OrderBookUpdate&quot;</span>,
   <span class="hljs-attr">&quot;e&quot;</span>: <span class="hljs-string">&quot;Partial&quot;</span>,
   <span class="hljs-attr">&quot;c&quot;</span>: [{
     <span class="hljs-attr">&quot;bids&quot;</span>: [ [ <span class="hljs-string">&quot;460&quot;</span>, <span class="hljs-string">&quot;1.123455666&quot;</span> ] ],
     <span class="hljs-attr">&quot;asks&quot;</span>: [ [ <span class="hljs-string">&quot;470&quot;</span>, <span class="hljs-string">&quot;0.98&quot;</span> ] ],
     <span class="hljs-attr">&quot;timestamp&quot;</span>: <span class="hljs-number">1616112500667</span>,
     <span class="hljs-attr">&quot;nonce&quot;</span>: <span class="hljs-string">&quot;0x816c8dd7b069a00a0f0a83cbd630b3b4069431a6eb141ddf3108a20d94c3f5f5&quot;</span>,
     <span class="hljs-attr">&quot;aggregationType&quot;</span>: <span class="hljs-string">&quot;0.0001&quot;</span>
   }]
}</code></pre>
            <p>The current snapshot is returned immediately after the subscription receipt with a type of <code>Partial</code>.</p>
            <h2 id="market-events-streaming-updates">Market events streaming updates</h2>
            <blockquote>
               <p>Streaming updates</p>
            </blockquote>
            <pre class="highlight json"><code>{
   <span class="hljs-attr">&quot;t&quot;</span>: <span class="hljs-string">&quot;OrderBookUpdate&quot;</span>,
   <span class="hljs-attr">&quot;e&quot;</span>: <span class="hljs-string">&quot;Update&quot;</span>,
   <span class="hljs-attr">&quot;c&quot;</span>: [{ 
     <span class="hljs-attr">&quot;bids&quot;</span>: [ [ <span class="hljs-string">&quot;580.56&quot;</span>, <span class="hljs-string">&quot;1.5&quot;</span> ] ],
     <span class="hljs-attr">&quot;asks&quot;</span>: [],
     <span class="hljs-attr">&quot;timestamp&quot;</span>: <span class="hljs-number">1616087958750</span>,
     <span class="hljs-attr">&quot;nonce&quot;</span>: <span class="hljs-string">&quot;0x1e8038f562948c0fc747cdab1ee8ed69c13f5ca34e194ef147c8d140ba040f14&quot;</span>,
     <span class="hljs-attr">&quot;aggregationType&quot;</span>: <span class="hljs-string">&quot;0.0001&quot;</span>
   }]
}</code></pre>
            <p>Streaming updates follow, with the type <code>Update</code>.</p>
            <h2 id="mark-price-subscription-confirmation">Mark price subscription confirmation</h2>
            <blockquote>
               <p>Subscription confirmation for Mark Price</p>
            </blockquote>
            <pre class="highlight json"><code>{
  <span class="hljs-attr">&quot;receipt&quot;</span>: {
    <span class="hljs-attr">&quot;t&quot;</span>: <span class="hljs-string">&quot;Subscribed&quot;</span>,
    <span class="hljs-attr">&quot;c&quot;</span>: {
      <span class="hljs-attr">&quot;msg&quot;</span>: <span class="hljs-string">&quot;Subscribed to MarkPriceUpdate for ETHPERP&quot;</span>
    }
  }
}</code></pre>
            <p>For Mark Price, the subscription confirmation is of type <code>subscribed</code>.</p>
            <h2 id="partial-mark-price-snapshot">Partial mark price snapshot</h2>
            <blockquote>
               <p>&quot;type&quot;: &quot;Partial mark price snapshot&quot;</p>
            </blockquote>
            <pre class="highlight json"><code>{
   <span class="hljs-attr">&quot;t&quot;</span>: <span class="hljs-string">&quot;MarkPriceUpdate&quot;</span>,
   <span class="hljs-attr">&quot;e&quot;</span>: <span class="hljs-string">&quot;Partial&quot;</span>,
   <span class="hljs-attr">&quot;c&quot;</span>: [{
     <span class="hljs-attr">&quot;price&quot;</span>: <span class="hljs-string">&quot;472.96848799410645&quot;</span>,
     <span class="hljs-attr">&quot;symbol&quot;</span>: <span class="hljs-string">&quot;ETHPERP&quot;</span>,
     <span class="hljs-attr">&quot;createdAt&quot;</span>: <span class="hljs-string">&quot;2021-03-19T00:16:57.045Z&quot;</span>,
     <span class="hljs-attr">&quot;updatedAt&quot;</span>: <span class="hljs-string">&quot;2021-03-19T00:16:57.045Z&quot;</span>
   }]
}</code></pre>
            <p>A mark price subscription is followed by an initial <code>Partial</code> snapshot. </p>
            <h2 id="mark-price-streaming-updates">Mark price streaming updates</h2>
            <blockquote>
               <p>Mark price streaming updates</p>
            </blockquote>
            <pre class="highlight json"><code>{
  <span class="hljs-attr">&quot;t&quot;</span>: <span class="hljs-string">&quot;MarkPriceUpdate&quot;</span>,
  <span class="hljs-attr">&quot;e&quot;</span>: <span class="hljs-string">&quot;Update&quot;</span>,
  <span class="hljs-attr">&quot;c&quot;</span>: [{
    <span class="hljs-attr">&quot;createdAt&quot;</span>: <span class="hljs-string">&quot;2021-03-04T22:51:37.113985+00:00&quot;</span>,
    <span class="hljs-attr">&quot;updatedAt&quot;</span>: <span class="hljs-string">&quot;2021-03-04T22:51:37.113985+00:00&quot;</span>,
    <span class="hljs-attr">&quot;price&quot;</span>: <span class="hljs-string">&quot;458.40712784392935&quot;</span>,
    <span class="hljs-attr">&quot;symbol&quot;</span>: <span class="hljs-string">&quot;ETHPERP&quot;</span>
  }]
}</code></pre>
            <p>Streaming updates follow the snapshot, with the type <code>Update</code>.</p>
            <h1 id="validation">Validation</h1>
            <p>TBD</p>
            <h1 id="rate-limits">Rate Limits</h1>
            <p>The websocket API will (eventually) use tiers to determine rate limits for each ethereum account. Rate limits restrict the number of &quot;Commands&quot; an account can place per minute.</p>
            <p>Subscriptions are not rate limited.</p>
            <h1 id="errors">Errors</h1>
            <aside class=error> This error section is stored in a separate file in `includes/_errors.md`. Slate allows you to optionally separate out your docs into many files...just save them to the `includes` folder and add them to the top of your `index.md`'s front matter. Files are included in the order listed. </aside>
            <p>The DerivaDEX API uses the following error codes:</p>
            <p>TBD</p>
         </div>
         <div class=dark-box>
            <div class=lang-selector>
               <a href=# data-language-name="json">json</a>
            </div>
         </div>
      </div>
   </body>
</html>